<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Guide - Nan Province</title>

    <link
        href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&family=Sarabun:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <link rel="stylesheet" href="assets/styles/main.css">
    <link rel="stylesheet" href="assets/styles/chat.css">


    <style>
        /* Specific overrides for chat layout if needed */
        .view-section {
            display: none;
            width: 100%;
            height: 100%;
            position: relative;
            flex-direction: column;
        }

        .view-section.active {
            display: flex;
        }
    </style>
</head>

<body>
    <div class="app-container" style="height: 100vh; display: flex;">

        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="robot-avatar-icon">
                    <div class="head-accent"></div>
                    <div class="face-plate">
                        <div class="eye left"></div>
                        <div class="eye right"></div>
                    </div>
                </div>
                <h2>‡∏ô‡πâ‡∏≠‡∏á‡∏ô‡πà‡∏≤‡∏ô AI</h2>
            </div>
            <nav class="sidebar-menu">
                <button id="btn-tab-chat" class="menu-item active" onclick="switchInternalTab('chat', this)">
                    <i class="fa-solid fa-message"></i> ‡πÅ‡∏ä‡∏ó‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß
                </button>

                <hr style="border-color: rgba(255,255,255,0.1); margin: 10px 0;">

                <a href="robot_avatar.html" class="menu-item">
                    <i class="fa-solid fa-robot"></i> ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≠‡∏á‡∏ô‡πà‡∏≤‡∏ô (3D)
                </a>

                <button id="faq-button" class="menu-item"
                    onclick="switchInternalTab('chat', document.querySelector('.sidebar-menu button:first-child'))">
                    <i class="fa-solid fa-circle-question"></i> ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢
                </button>
            </nav>
            <div class="sidebar-footer">
                <a href="/" class="btn-reset"
                    style="text-decoration: none; display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px;">
                    <i class="fa-solid fa-house"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                </a>
                <button id="new-chat-btn" class="btn-reset">
                    <i class="fa-solid fa-rotate-right"></i> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà
                </button>
            </div>
        </aside>

        <main style="flex-grow: 1; position: relative; height: 100%;">

            <section id="view-chat" class="view-section active">
                <header class="mobile-header"><span>AI Guide ‡∏ô‡πà‡∏≤‡∏ô</span></header>
                <div id="message-area" class="messages-container"></div>

                <!-- Floating Action Panel (Collapsible) -->
                <div class="fab-panel" id="fab-panel">
                    <button class="fab-toggle" id="fab-toggle" title="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                    <div class="fab-actions" id="fab-actions">
                        <button id="music-button" class="fab-btn" title="üéµ ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á">
                            <i class="fa-solid fa-music"></i>
                            <span>‡πÄ‡∏û‡∏•‡∏á</span>
                        </button>
                        <button id="faq-button-bar" class="fab-btn" title="‚ùì ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢">
                            <i class="fa-solid fa-circle-question"></i>
                            <span>FAQ</span>
                        </button>
                        <button id="calc-button" class="fab-btn" title="üî¢ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç">
                            <i class="fa-solid fa-calculator"></i>
                            <span>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</span>
                        </button>
                        <button id="nav-button" class="fab-btn" title="üó∫Ô∏è ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á">
                            <i class="fa-solid fa-route"></i>
                            <span>‡∏ô‡∏≥‡∏ó‡∏≤‡∏á</span>
                        </button>
                        <button id="location-button" class="fab-btn" title="üìç ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î"
                            onclick="window.ToastManager.showWelcomeToast()">
                            <i class="fa-solid fa-map-location-dot"></i>
                            <span>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏µ‡πà</span>
                        </button>
                    </div>
                </div>

                <div class="input-area-wrapper">
                    <div class="input-container">
                        <!-- AI Mode Selector -->
                        <button id="ai-mode-btn" class="btn-icon mode-btn" title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÇ‡∏´‡∏°‡∏î AI">
                            <i class="fa-solid fa-bolt"></i>
                        </button>
                        <button id="mic-button" class="btn-icon"><i class="fa-solid fa-microphone"></i></button>
                        <textarea id="user-input" placeholder="‡∏ñ‡∏≤‡∏°‡∏ô‡πâ‡∏≠‡∏á‡∏ô‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡πÄ‡∏à‡πâ‡∏≤..." rows="1"></textarea>
                        <button id="send-button-icon" class="btn-send"><i class="fa-solid fa-paper-plane"></i></button>
                    </div>
                    <!-- Mode indicator -->
                    <div id="mode-indicator" class="mode-indicator">‚ö° ‡∏Ñ‡∏¥‡∏î‡πÄ‡∏£‡πá‡∏ß</div>
                </div>
            </section>

            <!-- Travel Mode Container Removed -->

        </main>

        <!-- Toast Notification Container -->
        <div class="toast-container" id="toast-container">
            <!-- Toasts will be dynamically added here -->
        </div>

    </div>

    <!-- Welcome Toast Template (Hidden) -->
    <template id="welcome-toast-template">
        <div class="toast-notification" id="welcome-toast" onclick="window.ToastManager.expandToast(this)">
            <button class="toast-close"
                onclick="event.stopPropagation(); window.ToastManager.closeToast('welcome-toast')">
                <i class="fa-solid fa-xmark"></i>
            </button>
            <div class="toast-header">
                <span class="toast-icon">üëã</span>
                <div>
                    <div class="toast-title">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏∞!</div>
                    <div class="toast-subtitle clickable-hint">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡πÄ‡∏£‡∏≤‡∏ß‡πà‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÑ‡∏´‡∏ô</div>
                </div>
            </div>
            <div class="toast-content">
                <div class="toast-input-group">
                    <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</label>
                    <select id="toast-province-select">
                        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î --</option>
                        <option value="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</option>
                        <option value="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà">‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</option>
                        <option value="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢">‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡∏£‡∏≤‡∏¢</option>
                        <option value="‡∏ô‡πà‡∏≤‡∏ô">‡∏ô‡πà‡∏≤‡∏ô (‡∏Ñ‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô)</option>
                        <option value="‡πÅ‡∏û‡∏£‡πà">‡πÅ‡∏û‡∏£‡πà</option>
                        <option value="‡∏•‡∏≥‡∏õ‡∏≤‡∏á">‡∏•‡∏≥‡∏õ‡∏≤‡∏á</option>
                        <option value="‡∏û‡∏∞‡πÄ‡∏¢‡∏≤">‡∏û‡∏∞‡πÄ‡∏¢‡∏≤</option>
                        <option value="‡∏•‡∏≥‡∏û‡∏π‡∏ô">‡∏•‡∏≥‡∏û‡∏π‡∏ô</option>
                        <option value="‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå">‡∏ô‡∏Ñ‡∏£‡∏™‡∏ß‡∏£‡∏£‡∏Ñ‡πå</option>
                        <option value="‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å">‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å</option>
                        <option value="‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô">‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô</option>
                        <option value="‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤">‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤</option>
                        <option value="‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ">‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ</option>
                        <option value="‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï">‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï</option>
                        <option value="‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ">‡∏™‡∏∏‡∏£‡∏≤‡∏©‡∏é‡∏£‡πå‡∏ò‡∏≤‡∏ô‡∏µ</option>
                        <option value="other_thai">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏≠‡∏∑‡πà‡∏ô‡πÜ...</option>
                        <option value="foreign">‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</option>
                    </select>
                </div>
                <div class="toast-input-group" id="toast-custom-input-group" style="display: none;">
                    <label>‡∏û‡∏¥‡∏°‡∏û‡πå‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î/‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</label>
                    <input type="text" id="toast-custom-input" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏á‡∏Ç‡∏•‡∏≤, ‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô, ‡∏™‡∏´‡∏£‡∏±‡∏ê‡∏≠‡πÄ‡∏°‡∏£‡∏¥‡∏Å‡∏≤">
                </div>
                <div class="toast-actions">
                    <button class="toast-btn toast-btn-secondary"
                        onclick="window.ToastManager.skipWelcome()">‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô</button>
                    <button class="toast-btn toast-btn-primary" onclick="window.ToastManager.submitWelcome()">
                        <i class="fa-solid fa-check"></i> ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                    </button>
                </div>
            </div>
        </div>
    </template>

    <script src="assets/scripts/config.js"></script>
    <script src="assets/scripts/main.js"></script>
    <script src="assets/scripts/music_player.js"></script>
    <script src="assets/scripts/calculator_widget.js"></script>
    <script src="assets/scripts/fab_manager.js"></script>
    <script src="assets/scripts/thinking_indicator.js"></script>
    <script src="assets/scripts/chat.js"></script>

    <script>
        function switchInternalTab(viewName, btnElement) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.sidebar-menu .menu-item').forEach(el => {
                if (el.tagName === 'BUTTON') el.classList.remove('active');
            });

            document.getElementById(`view-${viewName}`).classList.add('active');
            if (btnElement) btnElement.classList.add('active');
        }
    </script>
</body>

</html>