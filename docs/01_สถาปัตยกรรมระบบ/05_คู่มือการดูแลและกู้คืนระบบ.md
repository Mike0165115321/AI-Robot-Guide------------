# üõ†Ô∏è ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡πÅ‡∏•‡∏∞‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (Operations & Maintenance Manual)

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö **System Admin / DevOps** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á (High Availability) ‡πÅ‡∏•‡∏∞‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏´‡∏ï‡∏∏‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô (Disaster Recovery)

---

## 1. ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏∞‡∏ö‡∏ö (Monitoring)

### 1.1 ‡∏î‡∏π Log Files
Log ‡∏Ç‡∏≠‡∏á Backend ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà `Back-end/logs/conversation.log` ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏π‡∏ú‡πà‡∏≤‡∏ô Docker:

```bash
# ‡∏î‡∏π Log ‡∏Ç‡∏≠‡∏á Backend ‡πÅ‡∏ö‡∏ö Real-time
docker compose logs -f backend

# ‡∏î‡∏π Log ‡∏Ç‡∏≠‡∏á Worker (LINE)
docker compose logs -f line_worker
```

### 1.2 ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Containers
```bash
docker compose ps
```
*‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏Å‡∏ï‡∏¥:* ‡∏ó‡∏∏‡∏Å Service (backend, mongo, qdrant, redis) ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ **Up**

---

## 2. ‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Backup Strategy)

‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ **‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏•‡∏∞ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á** (‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡πà‡∏≠‡∏¢)

### 2.1 Backup MongoDB (‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ó‡∏™‡∏ô‡∏ó‡∏ô‡∏≤ & ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà)
```bash
# Dump ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå .gz
docker compose exec -T mongodb mongodump --archive --gzip > db_backup_$(date +%F).gz
```

### 2.2 Backup Qdrant (‡πÄ‡∏Å‡πá‡∏ö Vector & Snapshots)
Qdrant ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ Snapshot ‡∏ú‡πà‡∏≤‡∏ô API:
```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á Snapshot
curl -X POST "http://localhost:6333/collections/travel_locations/snapshots"

# ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Snapshot ‡∏°‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ
# (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏î‡∏π‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô Dashboard ‡∏´‡∏£‡∏∑‡∏≠ Response JSON ‡∏Å‡πà‡∏≠‡∏ô)
```
*‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡πà‡∏≤‡∏¢‡πÜ:* Copy ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `qdrant_storage` ‡∏ó‡∏µ‡πà mount volume ‡πÑ‡∏ß‡πâ ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πâ‡∏≠‡∏ô

---

## 3. ‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (System Recovery)

### 3.1 Restore MongoDB
```bash
# Restore ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå .gz
cat db_backup_2025-x-x.gz | docker compose exec -T mongodb mongorestore --archive --gzip
```

### 3.2 Restart Services (‡∏Å‡∏£‡∏ì‡∏µ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡πâ‡∏≤‡∏á)
‡∏ñ‡πâ‡∏≤ AI ‡πÄ‡∏á‡∏µ‡∏¢‡∏ö ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≠‡∏ö Error ‡πÅ‡∏õ‡∏•‡∏Å‡πÜ ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏á Restart Service ‡∏´‡∏•‡∏±‡∏Å:
```bash
# Restart ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Backend
docker compose restart backend

# Restart ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô Database
docker compose restart backend line_worker
```

---

## 4. ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢ (Troubleshooting)

### ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: AI ‡∏ï‡∏≠‡∏ö‡∏ß‡πà‡∏≤ "Error: Rate limit exceeded"
*   **‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** ‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Ç‡∏≠‡∏á Groq ‡∏´‡∏£‡∏∑‡∏≠ Gemini ‡πÄ‡∏ï‡πá‡∏° (429 Too Many Requests)
*   **‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ:**
    1.  ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏û‡∏±‡∏Å (1-2 ‡∏ô‡∏≤‡∏ó‡∏µ) ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà
    2.  ‡πÄ‡∏û‡∏¥‡πà‡∏° API Key ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÉ‡∏ô `key_manager.py` (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ß‡∏ô‡πÉ‡∏ä‡πâ Key ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ñ‡πâ‡∏≤‡∏ó‡∏≥‡πÑ‡∏ß‡πâ)
    3.  ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Model ‡πÉ‡∏ô `.env` ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏á (‡πÄ‡∏ä‡πà‡∏ô `llama-3-8b`)

### ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡πÄ‡∏™‡∏µ‡∏¢‡∏á TTS ‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å / ‡∏ä‡πâ‡∏≤‡∏°‡∏≤‡∏Å
*   **‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** EdgeTTS ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Server Microsoft ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ
*   **‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ:** ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï‡∏Ç‡∏≠‡∏á Server ‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `VOICE_GENDER` ‡πÉ‡∏ô `.env` ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏≠‡∏∑‡πà‡∏ô‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß

### ‚ùå ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ Google Sheets
*   **‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Worker Sync ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏¥‡∏î Lock
*   **‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ:**
    1.  ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ Admin (`/admin`) ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° **"Force Sync"**
    2.  ‡∏î‡∏π Log ‡∏ß‡πà‡∏≤‡∏°‡∏µ Error ‡πÅ‡∏ñ‡∏ß‡πÑ‡∏´‡∏ô (FORMAT ‡∏ú‡∏¥‡∏î, URL ‡∏£‡∏π‡∏õ‡πÄ‡∏™‡∏µ‡∏¢)

---

## 5. Security Best Practices
1.  **‡∏´‡πâ‡∏≤‡∏°** commit ‡πÑ‡∏ü‡∏•‡πå `.env` ‡∏Ç‡∏∂‡πâ‡∏ô Git ‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î
2.  **‡∏´‡∏°‡∏±‡πà‡∏ô‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï** Image Docker: `docker compose pull` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö Patch ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á MongoDB/Qdrant
3.  **‡∏õ‡∏¥‡∏î Port:** ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î Port Cloud DB (27017, 6333) ‡∏≠‡∏≠‡∏Å Public Net (‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô VPN ‡∏´‡∏£‡∏∑‡∏≠ localhost ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
