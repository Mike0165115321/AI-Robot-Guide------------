# üèóÔ∏è AI Robot Guide Architecture & Roadmap (Hybrid Edition)

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (Hybrid Python-Go-C++) ‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏á‡∏≤‡∏ô

---

## üèõÔ∏è 1. ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï (Current Architecture)

‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ã‡∏õ‡∏ï‡πå **"One Port to Rule Them All"** ‡πÇ‡∏î‡∏¢‡∏°‡∏µ **Go Gateway (Port 8080)** ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

### üîå Connectivity Diagram

```mermaid
graph TD
    User["üßî User / Browser"] -->|HTTP/WebSocket :8080| Gateway["üêπ Go Gateway"]
    
    subgraph "LocalHOST (Internal Network)"
        Gateway -->|Proxy API/WS :9090| Python["üêç Python Backend"]
        Gateway -->|Serve Static Files| Frontend["üìÇ Frontend Assets"]
        Gateway -.->|Future gRPC :50051| Cpp["üîä C++ Audio Engine"]
        
        Python -->|DB Query| Mongo[("üçÉ MongoDB")]
        Python -->|Vector Search| Qdrant[("üéØ Qdrant")]
        Python -->|Edges| External["‚òÅÔ∏è External APIs (Gemini/Groq)"]
    end
```

### COMPONENT DUTIES (‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö)

#### 1. üìÇ Frontend (Vanilla JS)
- ‡∏à‡∏∏‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á: `http://localhost:8080`
- ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà: ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• UI, ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Audio Queue, ‡∏™‡πà‡∏á WebAudio ‡πÅ‡∏ö‡∏ö Streaming
- **‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏´‡∏≤ `ws://localhost:8080/ws/avatar` ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å Python ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á)

#### 2. üêπ Go Gateway (Port 8080)
- ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:
    - **Reverse Proxy:** ‡∏£‡∏±‡∏ö Traffic ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å Frontend ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ Python
    - **WebSocket Proxy:** ‡∏î‡∏π‡πÅ‡∏•‡∏ó‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Real-time ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Frontend <-> Python
    - **Static File Server:** ‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡πÑ‡∏ü‡∏•‡πå HTML/CSS/JS/Images
    - **Security:** ‡πÄ‡∏õ‡πá‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤ (‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏™‡πà Rate Limit / Auth ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà)

#### 3. üêç Python Backend (Port 9090)
- **Status:** `Active (Listening on 127.0.0.1 ONLY)`
- ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà:
    - **Brain (Business Logic):** ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Avatar, RAG, Chat
    - **TTS (Text-to-Speech):** ‡πÉ‡∏ä‡πâ `edge-tts` (Streaming) ‡∏ï‡∏±‡∏î‡∏Ñ‡∏≥‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ
    - **Integration:** ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö LLM (Gemini/Groq) ‡πÅ‡∏•‡∏∞ Database

#### 4. üîä C++ Audio Engine (Port 50051)
- **Status:** `Standing By (Running)`
- ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà: ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô STT/TTS ‡∏´‡∏ô‡∏±‡∏Å‡πÜ ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï (High Performance Computing)

---

## üó∫Ô∏è 2. ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ (Development Roadmap)

### ‚úÖ Phase 1-7 (Completed)
- [x] ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Python Environment (`.venv-robot`)
- [x] ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç UI/UX ‡πÅ‡∏•‡∏∞ Responsive Design
- [x] ‡∏¢‡πâ‡∏≤‡∏¢ Database ‡πÑ‡∏õ Docker
- [x] ‡∏û‡∏±‡∏í‡∏ô‡∏≤ Streaming TTS (‡∏û‡∏π‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏≠‡∏à‡∏ö‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ)
- [x] ‡∏™‡∏£‡πâ‡∏≤‡∏á Go Gateway ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ "One Port Policy"

### üöß Phase 8: High Performance STT (Next Step)
**‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:** ‡∏¢‡πâ‡∏≤‡∏¢‡∏á‡∏≤‡∏ô "‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á" (STT) ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å Python ‡πÑ‡∏õ‡πÉ‡∏´‡πâ C++
1.  **Python:** ‡∏´‡∏¢‡∏∏‡∏î‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏• Whisper ‡πÄ‡∏≠‡∏á
2.  **Go Gateway:** ‡∏£‡∏±‡∏ö Audio Stream ‡∏à‡∏≤‡∏Å Frontend
3.  **Go Gateway:** ‡∏™‡πà‡∏á Audio Stream ‡πÑ‡∏õ‡πÄ‡∏Ç‡πâ‡∏≤ **C++ Engine (gRPC)** ‡πÅ‡∏ó‡∏ô
4.  **Result:** ‡πÑ‡∏î‡πâ Text ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ -> ‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Python ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡πà‡∏≠
*‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå: ‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏∞ RAM ‡∏Ç‡∏≠‡∏á Python ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô 2-3 ‡πÄ‡∏ó‡πà‡∏≤*

### üîÆ Phase 9: High Performance TTS (Future)
**‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:** ‡∏¢‡πâ‡∏≤‡∏¢‡∏á‡∏≤‡∏ô "‡∏û‡∏π‡∏î" (TTS) ‡πÑ‡∏õ C++ (‡∏ñ‡πâ‡∏≤ EdgeTTS ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Offline 100%)
*‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô EdgeTTS ‡∏î‡∏µ‡∏°‡∏≤‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡∏ó‡∏≥*

### üîÆ Phase 10: Business Logic Migration (Long Term)
**‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:** ‡∏¢‡πâ‡∏≤‡∏¢ Logic ‡πÄ‡∏ö‡∏≤‡πÜ (‡πÄ‡∏ä‡πà‡∏ô CRUD, User Management) ‡∏°‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢ Go
- ‡πÉ‡∏´‡πâ Python ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏Ñ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà "‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö AI" ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
- ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏±‡∏Å‡∏û‡∏±‡∏ô‡∏Ñ‡∏ô‡∏™‡∏ö‡∏≤‡∏¢‡πÜ

---

## üìù 3. ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡∏á‡∏≤‡∏ô (Handover Instructions)

### ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå (Standard Procedure)
‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏à‡∏ö ‡∏´‡πâ‡∏≤‡∏°‡∏£‡∏±‡∏ô‡πÅ‡∏¢‡∏Å‡πÄ‡∏≠‡∏á:
```bash
./start_all.sh
```

### ‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ
- `frontend/assets/scripts/config.js`: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Port (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô 8080)
- `go-gateway/internal/handlers/websocket.go`: ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö Proxy
- `Back-end/core/ai_models/speech_handler.py`: ‡∏ï‡∏±‡∏ß‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏û‡∏π‡∏î (Streaming Logic)

### ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á
1.  **‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏Å‡πâ Port:** 9090 ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏≠‡∏Å Public ‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î (Security Risk)
2.  **Database:** ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏±‡∏á ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Docker Containers (`mongo`, `qdrant`) ‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏™‡∏°‡∏≠
3.  **Keys:** ‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÉ‡∏ô Back-end ‡∏´‡πâ‡∏≤‡∏°‡∏´‡∏≤‡∏¢

---
*Generated by Antigravity (AI Assistant) - 14 Dec 2025*
