# üìÖ Phase 2: Analytics Deep Dive (‡πÅ‡∏ú‡∏ô‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ)

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô **"‡πÉ‡∏ö‡∏á‡∏≤‡∏ô" (Job Sheet)** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡∏£‡∏∞‡∏ö‡∏ö Analytics ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å (Deep Insights) ‡πÅ‡∏•‡∏∞‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ (Tool Usage) ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÑ‡∏ß‡πâ

---

## 1. üìâ Missed Opportunities Tracking (‡∏à‡∏±‡∏ö‡∏ï‡∏≤‡∏à‡∏∏‡∏î‡∏≠‡πà‡∏≠‡∏ô AI)
> **Goal:** ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà AI ‡∏ï‡∏≠‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ï‡πà‡∏≥ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ô‡∏≥‡πÑ‡∏õ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ (Technical Specs)
1.  **Backend (`rag_orchestrator.py`):**
    *   ‡∏õ‡∏£‡∏±‡∏ö Logic ‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö ‡πÉ‡∏´‡πâ‡πÅ‡∏õ‡∏∞‡∏Ñ‡πà‡∏≤ `confidence_score` ‡∏°‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏™‡∏°‡∏≠
    *   ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Threshold: ‡∏ñ‡πâ‡∏≤ `confidence_score < 0.6` (‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏ß‡πâ) ‡πÉ‡∏´‡πâ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô **"Low Confidence Query"**
2.  **Database (`analytics_logs`):**
    *   ‡πÄ‡∏û‡∏¥‡πà‡∏° Field: `is_low_confidence` (Boolean) ‡πÅ‡∏•‡∏∞ `confidence_score` (Float)
    *   (Optional) ‡πÅ‡∏¢‡∏Å Collection ‡πÉ‡∏´‡∏°‡πà `missed_questions` ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Query ‡∏á‡πà‡∏≤‡∏¢‡πÜ
3.  **Dashboard UI:**
    *   ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà: **"Top Unanswered Questions"**
    *   ‡πÅ‡∏™‡∏î‡∏á: ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ | ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
    *   Action: ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° "Copy" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Å‡πä‡∏≠‡∏õ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Knowledge Base ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

---

## 2. üõ†Ô∏è Tool Usage & Conversion Tracking (‡∏ß‡∏±‡∏î‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠)
> **Goal:** ‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ "‡∏Å‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á" ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏∏‡∏¢) ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡πÑ‡∏´‡∏ô‡∏ö‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î

### ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡πá‡∏ö (Scope)
‡πÄ‡∏£‡∏≤‡∏à‡∏∞ Tracking ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:
1.  **üó∫Ô∏è Google Maps Navigation:** (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏∏‡∏î) ‡∏ß‡∏±‡∏î Conversion ‡∏Å‡∏≤‡∏£‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏à‡∏£‡∏¥‡∏á
2.  **üßÆ Calculator:** ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡∏Ç
3.  **üéµ Music Player:** ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á
4.  **üìû Call Action:** ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡πÇ‡∏ó‡∏£‡∏≠‡∏≠‡∏Å (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
5.  **üåê External Links:** ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏•‡∏¥‡πâ‡∏á‡∏Ñ‡πå‡πÑ‡∏õ‡πÄ‡∏ß‡πá‡∏ö‡∏≠‡∏∑‡πà‡∏ô

### ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ (Technical Specs)
1.  **Frontend (`chat.js` & `avatar_logic.js`):**
    *   ‡∏î‡∏±‡∏Å‡∏à‡∏±‡∏ö Event `click` ‡∏ó‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ
    *   ‡∏™‡πà‡∏á API Request: `POST /api/analytics/interaction`
    *   Payload: `{"type": "tool_usage", "tool_name": "google_maps", "target": "‡∏ß‡∏±‡∏î‡∏†‡∏π‡∏°‡∏¥‡∏ô‡∏ó‡∏£‡πå"}`
2.  **Backend:**
    *   ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á `analytics_logs` ‡∏´‡∏£‡∏∑‡∏≠ `conversion_logs`
3.  **Dashboard UI:**
    *   ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô: **"Most Used Tools"**
    *   ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: Maps (50%), Music (30%), Calculator (20%)

---

## 3. üìù Feature Request Logging (‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏£‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ)
> **Goal:** ‡∏à‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ "‡∏Ç‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°" ‡πÅ‡∏ï‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ

### ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏≤‡∏á‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ
*   **Keyword Detection:** ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Pattern ‡πÉ‡∏ô Chat ‡πÄ‡∏ä‡πà‡∏ô:
    *   *"‡∏ó‡∏≥...‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏°"*
    *   *"‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô...‡∏°‡∏±‡πâ‡∏¢"*
    *   *"‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏°‡∏µ..."*
*   **LLM Analysis:** ‡πÉ‡∏´‡πâ AI Tag ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô request_feature ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏ó‡∏≥‡πÉ‡∏ô Background Process)
*   **Dashboard:** ‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô List "Suggested Features" ‡πÉ‡∏´‡πâ Dev ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤

---

## 4. üì§ Export Data (‡∏ô‡∏≥‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏≠‡∏Å)
> **Goal:** ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏à‡∏ö ‡πÑ‡∏î‡πâ‡πÑ‡∏ü‡∏•‡πå Report ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠

*   **Format:** CSV (UTF-8 w/ BOM ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Excel ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)
*   **Data Included:**
    *   Conversations Log
    *   Feedback Stats
    *   Tool Usage Stats
*   **UI:** ‡∏õ‡∏∏‡πà‡∏° "Download Report" ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á Dashboard

---

## ‚úÖ Summary Checklist (‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏û‡∏£‡∏∏‡πà‡∏á‡∏ô‡∏µ‡πâ)
- [ ] **Backend:** ‡πÅ‡∏Å‡πâ `rag_orchestrator` ‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á Confidence Score
- [ ] **Backend:** ‡∏™‡∏£‡πâ‡∏≤‡∏á API Endpoint ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤ `tool_usage`
- [ ] **Frontend:** ‡∏ù‡∏±‡∏á Event Listener ‡∏õ‡∏∏‡πà‡∏° Maps, Music, Calculator
- [ ] **Dashboard:** ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á Missed Questions ‡πÅ‡∏•‡∏∞ ‡∏Å‡∏£‡∏≤‡∏ü Tool Usage
- [ ] **Dashboard:** ‡∏ó‡∏≥‡∏õ‡∏∏‡πà‡∏° Export CSV

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö! üöÄ
